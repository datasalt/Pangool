---
layout: user_guide
title: Pangool - User guide - Mapred API
---
<div class="hero-unit">
	<h1>Pangool User Guide</h1>
</div>

<h1>Mapred API</h1>

<p>
The Pangool MapReduce API is mainly formed by:
</p>

<ul>

	<li><strong><a href='https://github.com/datasalt/pangool/blob/master/core/src/main/java/com/datasalt/pangool/tuplemr/TupleMapper.java'>TupleMapper</a></strong> :
	</p>
	<p> Subclasses of this class will be ready to be used as Mappers in Pangool Jobs. 
	<br>This class requires two generic types: the ones that refer to the input format. 
	This is because TupleMappers always emit tuples as intermediate output, so we only need to add the types relative to the input format. 
	This class has three available methods: setup(), map() and cleanup().<p>
	</li> 

	<li><strong><a href='https://github.com/datasalt/pangool/blob/master/core/src/main/java/com/datasalt/pangool/tuplemr/TupleReducer.java'>TupleReducer</a></strong> : 
	</p>
	<p> Subclasses of this class will be ready to be used as reducers in Pangool jobs. 
	<br>This class requires two generic types: the ones that refer to the output format. 
	<br>This is because TupleReducers always receive ITuple groups and values from the intermediate output, so we only need to add the types relative to the output format.
	This class has three available methods: setup(), reduce() and cleanup(). 
	This class can also be used as a Combiner, as long as the output types are (ITuple, NullWritable).</p>
	</li>

	<li><strong>TupleMRContext</strong>:
	</p>
	<p>(An instance of this class is received by both TupleMapper and TupleReducer. The user can get the standard Hadoop Context object through <strong>getHadoopContext()</strong> to use counters, progress(), etc.)</p>
	</li>

	<li><strong><a href='https://github.com/datasalt/pangool/blob/master/core/src/main/java/com/datasalt/pangool/tuplemr/TupleRollupReducer.java'>TupleRollupReducer</a></strong> :
	</p>
	<p>
	Reducer to be used when using rollup. It will have extra methods: onOpen(), onClose(). For
	information on rollup, check the <a href="rollup.html">rollup section</a> in the user guide.
	</p>
	</li>

	<li><strong><a href='map_only_jobs.html'>MapOnlyJobBuilder</a></strong> :
	<p>
	Use this class to conveniently create jobs that only have Mapper steps.
	</p>
	
	<li><strong><a href='TupleMrBuilder.html'>TupleMRBuilder</a></strong> :
	</p>
	<p>
	Use this class to create job instances that use the Pangool API. The most important methods are:
	</p>
	<table class="table">
	<tr><td>addIntermediateSchema</td><td>Allows the user to define intermediate Schemas. 
	   At least one must be defined. When performing joins, usually more than one schema will be defined 
	   (see the <a href='joins.html'>joins section</a> for more information).</td></tr>
	<tr><td>addInput</td><td>Allows the user to add an input Path with an associated input format and TupleMapper. 
	  You can add an arbitrary number of inputs with this same method.</td></tr>
	<tr><td>addTupleInput</td><td>This method must be used when reading tuple inputs 
	 (files that were generated by Pangool jobs that wrote tuples as output).</td></tr>
	<tr><td>setOutput</td><td>Allows the user to define the job’s main output Path and format.</td></tr>
	<tr><td>setTupleOutput</td><td>This method must be used when writing tuples as the main output of the Job. 
	It will have an associated Schema so that Pangool knows how to write the Tuples.</td></tr>
	<tr><td>addNamedOutput</td><td>See <a href='named_outputs.html'>named outputs</a>.</td></tr>
	<tr><td>addNamedTupleOutput</td><td>See <a href='named_outputs.html'>named outputs</a>.</td></tr>
	<tr><td>setDefaultNamedOutput</td><td>See <a href='named_outputs.html'>named outputs</a>.</td></tr>
	<tr><td>setTupleReducer</td><td>Sets the TupleReducer instance to be used.</td></tr>
	<tr><td>setTupleCombiner</td><td>Sets the TupleReducer<ITuple, NullWritable> instance to be used as Combiner for the Job.</td></tr>
	<tr><td>setGroupByFields / setOrderBy</td><td>Configures how Pangool will sort and group by the intermediate tuples. For more info, check the “<a href='group_and_sort.html'>Group & Sort by</a>” section.</td></tr>
	<tr><td>createJob()</td><td>Returns the job instance read to be run.</td></tr>
	</table>		
	
	<li><strong><a href='http://pangool.net/apidocs/com/datasalt/pangool/tuplemr/mapred/lib/input/TupleTextInputFormat.html'>TupleTextInputFormat</a></strong></li>
	</p>
	<p>
	Use this input format for reading text files into Pangool's Tuples. See <a href='text_io.html'>Text I/O</a> for more info.
	</p>
	
	<li><strong><a href='http://pangool.net/apidocs/com/datasalt/pangool/tuplemr/mapred/lib/output/TupleTextOutputFormat.html'>TupleTextOutputFormat</a></strong></li>
	</p>
	<p>
	Use this output format for writing text files out of Pangool's Tuples. See <a href='text_io.html'>Text I/O</a> for more info.
	</p>
		
	<li><strong><a href='https://github.com/datasalt/pangool/blob/master/core/src/main/java/com/datasalt/pangool/tuplemr/IdentityTupleMapper.java'>IdentityTupleMapper</a></strong> :
	</p>
	<p>
	Use this Mapper implementation when your Mapper only needs to emit the Tuples as they 
	are being read (when using Tuple inputs).</p></li>

	<li><strong><a href='https://github.com/datasalt/pangool/blob/master/core/src/main/java/com/datasalt/pangool/tuplemr/IdentityTupleReducer.java'>IdentityTupleReducer</a></strong> :
	</p>
	<p>Use this Reducer implementation when your Reducer only needs to emit the Tuples as 
	they are being received in the Reducer (including all the Tuples in the values’ Iterator).</p></li>	
</ul>
</p>
